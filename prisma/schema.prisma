generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Privilege {
  ADMIN
  USER
  PROVIDER
}

model User {
  id       String @id @default(uuid())
  name     String
  password String

  privilege Privilege @default(USER)

  services  Service[] @relation("account")
  providers Service?  @relation("provider")

  @@map("users")
}

model ServiceDeliveryOffice {
  id          String @id @default(uuid())
  name        String
  phoneNumber String
  description String
  latitude    Float?
  longitude   Float?

  services Service[]

  @@map("service_delivery_offices")
}

enum CustomerType {
  Individual
  Organization
}

enum CustomerServiceType {
  Saler
  Buyer
  Witness
  Lessor
  Renter
  Giver
  Receiver
  Grantor
  Representative
}

enum Gender {
  Male
  Female
}

model Customer {
  id              String              @id @default(uuid())
  serviceType     CustomerServiceType
  customerType    CustomerType
  customerTitle   String
  name            String
  fatherName      String
  grandFatherName String
  gender          String
  nationality     String
  origin          String
  tin             Int
  foreign         Boolean
  region          String
  city            String
  subcity         String
  houseNumber     Int
  phoneNumber     String
  otherAddress    String?

  businessName String?
  grantorName  String?
  jobPosition  String?
  service      Service @relation(fields: [serviceId], references: [id])
  serviceId    String

  @@map("customers")
}

model Vehicle {
  id                  String @id @default(uuid())
  engineNumber        String
  chassisNumber       String
  libreNumber         String
  region              String
  code                String
  plateNumber         String
  vehicleType         String
  determinationKernNo String
  determinationPrice  String
  salesValue          String
  penaltyGov          String
  penalty             String
  bankName            String
  prePayment          String
  paymentType         String
  chequeNumber        String

  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?

  @@map("vehicles")
}

model Lease {
  id                  String   @id @default(uuid())
  formNumber          String
  leaseService        String
  totalLeasePrice     Int
  paidLeasePrice      Int
  remainingLeasePrice Int
  region              String
  city                String
  subcity             String
  kebele              String
  houseNumber         String
  leaseArea           Int
  bookNumber          String
  bankName            String
  value               Int
  prePayment          Int
  penalty             Int
  penaltyToGovernment Int
  paymentType         String
  bookGivenDate       DateTime

  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?

  @@map("leases")
}

model Residence {
  id          String @id @default(uuid())
  city        String
  subcity     String
  houseNumber String

  isCondominium Boolean
  bookNumber    String

  bookGivenDate DateTime

  buildingNumber      String
  area                String
  price               String
  penality            String
  paymentToGovernment String
  prePayment          String
  paymentType         String
  chequeNumber        String
  bankNumber          String

  residenceNumber    String
  totalLeasePrice    String
  paidResidencePrice String
  remainingPrice     String
  remainingPriceDate DateTime
  recieptNumber      String

  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?

  @@map("residences")
}

model Property {
  id String @id @default(uuid())

  propertyName String

  value         Int
  penality      Int?
  penaltyGov    Int?
  prePayment    Int
  paymentType   String
  bankName      String?
  chequeOrCpoNo String?

  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?

  @@map("properties")
}

model Motorcycle {
  id                  String @id @default(uuid())
  engineNumber        String
  chassisNumber       String
  libreNumber         String
  region              String
  code                String
  plateNumber         String
  motorcycleType      String
  determinationKernNo String
  determinationPrice  String
  salesValue          String
  penaltyGov          String
  penalty             String
  bankName            String
  prePayment          String
  paymentType         String
  chequeNumber        String

  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?

  @@map("motor_cycles")
}

model Loan {
  id                  String   @id @default(uuid())
  loanType            String
  loanAmount          Int
  paymentType         String
  penaltyForOther     Int
  penaltyToGovernment Int
  loanEndingDate      DateTime
  checkNumber         String

  service   Service? @relation(fields: [serviceId], references: [id])
  serviceId String?

  @@map("loans")
}

enum ServiceType {
  Sale
  Loan
  Lease
  Rental
}

enum ServiceSubType {
  Vehicle
  Residence
  Business
  OtherPropery
  VehicleSparePart
  Motorcycle
  ConstructionMachine
  Lease
}

enum ConfirmStatus {
  Approved
  Rejected
  Pending
}

model Service {
  id                      String                @id @default(uuid())
  confirmStatus           ConfirmStatus         @default(Pending)
  printStatus             Boolean
  fileLocation            String
  numberOfPages           Int
  filePath                String
  caseNumber              Int                   @default(autoincrement())
  serviceType             ServiceType
  serviceSubType          ServiceSubType
  serviceRequestDate      DateTime
  serviceDeliveryDate     DateTime
  fileNumber              Int
  amount                  Float
  serviceDeliveryOffice   ServiceDeliveryOffice @relation(fields: [serviceDeliveryOfficeId], references: [id])
  serviceDeliveryOfficeId String

  accountUser   User   @relation("account", fields: [accountUserId], references: [id])
  accountUserId String

  providingUser   User?   @relation("provider", fields: [providingUserId], references: [id])
  providingUserId String? @unique

  customers   Customer[]
  vehicles    Vehicle[]
  residences  Residence[]
  properties  Property[]
  motorcycles Motorcycle[]
  loans       Loan[]
  leases      Lease[]

  @@map("services")
}
